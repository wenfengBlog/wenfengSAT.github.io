---
layout:     post
title:      js常用工具类utils封装
subtitle:   用于记录一些js常用工具类utils封装方法
date:       2018-03-22
author:     wenfengSAT
header-img: img/post-bg-universe.jpg
catalog: true
tags:
    - JS
---

>js常用工具类utils封装


{% raw %}
```hbs

var utils = {
    formatString: 'yyyy-MM-dd HH:mm:ss',
    /**
     * 格式化时间
     * @param value
     * @returns {string}
     */
    formatTime: function (value) {
        var t = new Date(value), tf = function (i) {
            return (i < 10 ? '0' : '') + i;
        }
        return this.formatString.replace(/yyyy|yy|MM|dd|HH|mm|ss/g, function (a) {
            switch (a) {
                case 'yy':
                    return tf((t.getFullYear() + "").substr(2, 3));
                    break;
                case 'yyyy':
                    return tf(t.getFullYear());
                    break;
                case 'MM':
                    return tf(t.getMonth() + 1);
                    break;
                case 'mm':
                    return tf(t.getMinutes());
                    break;
                case 'dd':
                    return tf(t.getDate());
                    break;
                case 'HH':
                    return tf(t.getHours());
                    break;
                case 'ss':
                    return tf(t.getSeconds());
                    break;
            }
        });
    },
    /**
     * 日期格式化
     *
     * @param {}
     *            time
     * @param {}
     *            format
     * @return {}
     */
    dateFormat: function (time, format) {
        var t = new Date(time), tf = function (i) {
            return (i < 10 ? '0' : '') + i;
        }
        return format.replace(/yyyy|yy|MM|dd|HH|mm|ss/g, function (a) {
            switch (a) {
                case 'yy':
                    return tf((t.getFullYear() + "").substr(2, 3));
                    break;
                case 'yyyy':
                    return tf(t.getFullYear());
                    break;
                case 'MM':
                    return tf(t.getMonth() + 1);
                    break;
                case 'mm':
                    return tf(t.getMinutes());
                    break;
                case 'dd':
                    return tf(t.getDate());
                    break;
                case 'HH':
                    return tf(t.getHours());
                    break;
                case 'ss':
                    return tf(t.getSeconds());
                    break;
            }
        });
    },
    
    /**
     * 文件大小格式化
     * @param value
     * @returns {String}
     */
    byteSizeFormat: function (value) {
    	var kb = value/1024;
    	var mb = kb/1024;
    	var gb = kb/1000;
    	if(kb<1000){
    		return kb.toFixed(1)+"K";
    	}else if(mb<1000){
    		return mb.toFixed(1)+"M";
    	}else{
    		return gb.toFixed(1)+"G";
    	}
    },
	
	
	/**
     * 格式化时间，计算距离今天的时间间隔
     * @param time
     * @returns
     */
    timeFormat:function (time){
    	var old = new Date(time);
    	var now = new Date();
    	var syear = now.getFullYear() - old.getFullYear();
    	var smonth = now.getMonth() - old.getMonth();
    	var sday = now.getDate() - old.getDate();
    	var shour = now.getHours() - old.getHours();
    	var smin = now.getMinutes() - old.getMinutes();
    	if(now.getTime() < old.getTime()){
    		return formatTime(time);
        } else if(syear > 0){
            return syear + "年前";
        }else if(smonth > 0){
            return smonth + "个月前";
        }else if(sday > 0){
            return sday + "天前";
        }else if(shour > 0){
            return shour + "小时前";
        }else if(smin > 5){
            return smin + "分钟前";
        }else{
            return "刚刚";
        }
    }
}

------------------------>使用示例
/**
 * 格式化时间
 * @param val
 * @param row
 * @returns {*|string}
 */
function formatTime(val, row) {
    return utils.formatTime(val);
}



```
{% endraw %}